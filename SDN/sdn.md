# Koncepcja SDN
## Definicja
SDN (Software Defined Networking) - koncepcja architektury sieci polegająca na wydzieleniu z urządzenia sieciowego inteligentnego, tj. zarządczo-sterującego komponentu i pozostawienie dla tego urządzenia wyłącznie zadań polegających na przesyłaniu danych w pakietach pomiędzy portami.
## Historia
Historia zasad SDN wiąże się z rozdzieleniem control i data plan. Pierwsze użycie takiej techniki zostało zastosowane w sieci telefonicznej aby uprościć konfigurację i zarządzanie.
Internet Engineering Task Force (IETF) zaczęła rozważać różne sposoby rozłączenia funkcji sterowania i przekazywania danych w proponowanym standardzie interfejsu opublikowanym w 2004 r., odpowiednio nazwanym “Forwarding and Control Element Separation” (ForCES).

Te wczesne próby nie uzyskały zaakceptowane z dwóch powodów. Jednym z nich jest to, że w społeczności postrzegało oddzielenie control i data plane jako ryzykowne, zwłaszcza ze względu na możliwości awarii w control plane. Po drugie, producenci obawiali się, że stworzenie standardowych interfejsów programowania aplikacji (API) między control i data plane spowodowałoby zwiększenie konkurencji.

Wykorzystanie oprogramowania o otwartym kodzie źródłowym w architekturach control / data plane ma swoje korzenie w projekcie Ethane w dziale informatyki Stanforda. Prosta konstrukcja przełącznika Ethane doprowadziła do stworzenia OpenFlow. API dla OpenFlow powstało po raz pierwszy w 2008 roku. W tym samym roku powstał NOX - system operacyjny dla sieci.
Prace nad OpenFlow kontynuowano na Uniwersytecie Stanforda, w tym przy tworzeniu stanowisk testowych do oceny wykorzystania protokołu w jednej sieci kampusowej, a także w sieci WAN jako szkieletu do łączenia wielu kampusów.
W środowisku akademickim istniało kilka sieci badawczych i produkcyjnych opartych na przełącznikach OpenFlow np: NEC i Hewlett-Packard

Poza środowiskiem akademickim pierwsze wdrożenia zostały wprowadzone przez korporację Nicira w 2010 r. W celu kontroli OVS (Open Virtual Switch) firmy Onix, opracowanej wspólnie z NTT i Google. Ważnym wdrożeniem było wdrożenie “Google B4” w 2012 r.  Później Google potwierdziło swój pierwszy OpenFlow w swoich centrach danych, w tym samym czasie innym znanym dużym wdrożeniem jest China Mobile.

The Open Networking Foundation została założona w 2011 roku w celu promowania SDN i OpenFlow.
W 2014 r. Interop i Tech Field Day, SDN został zademonstrowany przez Avaya przy użyciu najkrótszego mostowania ścieżek - shortest path bridging (IEEE_802.1aq i OpenStack) jako zautomatyzowanego kampusu, rozszerzając automatyzację z centrum danych na urządzenie końcowe, usuwając ręczną konfigurację dostarczanych usług.
## Koncepcja
Software-defined networking (SDN) to architektura, która ma być łatwa w zarządzaniu, ekonomiczna i dostosowywana, nadające się do szybkiego i dynamicznego charakteru dzisiejszych aplikacji. Architektura SDN rozłącza funkcje sterowania sieciowego i przekazywania danych, umożliwiając sterowanie siecią bezpośrednio z aplikacji do kontroli sieci.
Protokół OpenFlow może być używany w technologiach SDN. Architektura SDN to:
Bezpośrednio programowalne: Kontrola sieci jest bezpośrednio programowalna, ponieważ jest oddzielona od funkcji przekazywania.
Agile: abstrakcyjne sterowanie przesyłaniem pozwala administratorom dynamicznie dostosowywać przepływ ruchu w całej sieci do zmieniających się potrzeb.

Centralnie zarządzane: inteligencja sieci jest (logicznie) scentralizowana w opartych na oprogramowaniu kontrolerach SDN.
Programowo skonfigurowane: SDN umożliwia administratorom sieci szybkie konfigurowanie, zarządzanie, zabezpieczanie i optymalizację zasobów sieciowych za pomocą dynamicznych, zautomatyzowanych programów SDN, które sami mogą napisać, ponieważ programy nie zależą od oprogramowania własnego.
Otwarty na standardy i neutralny dla dostawcy: Po wdrożeniu przez otwarte standardy, SDN upraszcza projektowanie i działanie sieci, ponieważ instrukcje są dostarczane przez kontrolery SDN, zamiast wielu urządzeń i protokołów specyficznych dla danego dostawcy.
## Potrzeba nowej architektury sieci
Eksplozja urządzeń mobilnych i treści, wirtualizacja serwerów i nadejście usług w chmurze należą do trendów, które sprawiają, że przemysł sieciowy ponownie analizuje tradycyjne architektury sieciowe. Wiele konwencjonalnych sieci jest hierarchicznych, zbudowanych na poziomach przełączników Ethernetowych ułożonych w strukturę drzewa. Ten projekt miał sens, gdy dominowały komputery typu klient-serwer, ale taka statyczna architektura nie pasuje do dynamicznych potrzeb obliczeniowych i pamięciowych dzisiejszych korporacyjnych centrów danych, kampusów i środowisk operatorskich. Niektóre z kluczowych trendów obliczeniowych napędzających potrzebę nowego paradygmatu sieci obejmują:
Zmienianie wzorców ruchu 

W centrum danych przedsiębiorstwa w strukturze ruchu znacznie się zmieniły. W przeciwieństwie do aplikacji typu klient-serwer, w których duża część komunikacji odbywa się między jednym klientem, a jednym serwerem, dzisiejsze aplikacje uzyskują dostęp do różnych baz danych i serwerów, tworząc falę ruchu "maszyna-maszyna" na wschód-zachód, zanim zwrócą dane do końcowego urządzenia użytkownika w klasycznym schemacie ruchu "północ-południe". Jednocześnie użytkownicy zmieniają wzorce ruchu sieciowego, gdy naciskają na dostęp do firmowych treści i aplikacji z dowolnego urządzenia (w tym własnego), łącząc się z dowolnego miejsca w dowolnym czasie. Wreszcie, wielu menedżerów centrów danych przedsiębiorstw rozważa model obliczania użyteczności, który może obejmować chmurę prywatną, chmurę publiczną lub pewną kombinację obu, co powoduje dodatkowy ruch w sieci rozległej.
## "Konsumpcja IT"
Użytkownicy coraz częściej korzystają z mobilnych urządzeń osobistych, takich jak smartfony, tablety i notebooki, aby uzyskać dostęp do sieci korporacyjnej. Działy IT są pod presją, aby dostosować te urządzenia osobiste, chroniąc dane korporacyjne i własność intelektualną oraz spełniając wymogi zgodności.
Rozwój usług w chmurze

Przedsiębiorstwa z entuzjazmem przyjęły zarówno publiczne, jak i prywatne usługi w chmurze, co doprowadziło do bezprecedensowego wzrostu tych usług. Jednostki biznesowe w przedsiębiorstwie chcą teraz uzyskać dostęp do aplikacji, infrastruktury i innych zasobów informatycznych na żądanie. Planowanie usług w chmurze przez dział informatyczny musi odbywać się w środowisku o podwyższonych wymaganiach w zakresie bezpieczeństwa i zgodności. Zapewnienie samoobsługi, zarówno w chmurze prywatnej, jak i publicznej, wymaga elastycznego skalowania zasobów obliczeniowych, pamięci masowej i sieci, najlepiej ze wspólnego punktu widzenia i ze wspólnego zestawu narzędzi.

"Big data" oznaczają większą przepustowość
Obsługa dzisiejszych "Big data" lub mega-zestawów danych wymaga masowego równoległego przetwarzania na tysiącach serwerów, z których wszystkie wymagają bezpośrednich połączeń ze sobą. Wzrost liczby gigabajtów danych napędza stałe zapotrzebowanie na dodatkową przepustowość sieci w centrum danych. Operatorzy sieci hiperskalowych centrów danych stają przed zniechęcającym zadaniem, polegającym na skalowaniu sieci do wcześniej niewyobrażalnego rozmiaru, utrzymując łączność dowolną, bez zbędnego ryzyka.
## Elementy architektoniczne
Ogólny przegląd architektury sieciowej definiowanej programowo
Poniższa lista definiuje i wyjaśnia elementy architektoniczne:
### Aplikacja SDN
Aplikacje SDN to programy, które jawnie, bezpośrednio i programowo komunikują swoje wymagania sieciowe i pożądane zachowanie sieciowe sterownikowi SDN za pośrednictwem northbound interface (NBI). Ponadto mogą mieć wgląd w abstrakcyjny widok sieci w celu ich wewnętrznego podejmowania decyzji. Aplikacja SDN składa się z jednej logiki aplikacji SDN i jednego lub więcej sterowników NBI. Aplikacje SDN mogą odsłonić kolejną warstwę abstrakcyjnej kontroli sieci, oferując w ten sposób jeden lub więcej NBI o wyższym poziomie za pośrednictwem odpowiednich agentów NBI.
### Kontroler SDN
Kontroler SDN jest logicznie scentralizowanym podmiotem odpowiedzialnym za tłumaczenie wymagań z warstwy aplikacji SDN do SDN Datapath i dostarczenie aplikacji SDN z abstrakcyjnym widokiem sieci (która może zawierać statystyki i zdarzenia) . Kontroler SDN składa się z jednego lub więcej agentów NBI, SDN Control Logic i Control to Data-Plane Interface (CDPI). Definicja jako scentralizowana logicznie jednostka nie określa ani nie wyklucza szczegółów implementacji, takich jak federacja wielu kontrolerów, hierarchiczne połączenie kontrolerów, interfejsy komunikacyjne między kontrolerami, ani wirtualizacja lub dzielenie zasobów sieciowych.
### SDN Datapath
SDN Datapath jest logicznym urządzeniem sieciowym, które eksponuje widoczność i niekwestionowaną kontrolę nad reklamowanymi możliwościami przekazywania i przetwarzania danych. Reprezentacja logiczna może obejmować całość lub część zasobów fizycznych nośnika. Datapath SDN składa się z agenta CDPI i zestawu jednego lub więcej silników przekazywania ruchu i przetwarzania ruchu. Te silniki i funkcje mogą obejmować proste przekazywanie między zewnętrznymi interfejsami danych lub wewnętrznymi funkcjami przetwarzania. Jeden lub więcej SDN Datapath może być zawarte w jednym (fizycznym) elemencie sieci - zintegrowanej fizycznej kombinacji zasobów komunikacyjnych, zarządzanej jako jednostka. Datapath SDN może być również zdefiniowany dla wielu fizycznych elementów sieci. Ta logiczna definicja nie określa ani nie wyklucza szczegółów implementacji, takich jak mapowanie logiczne do fizycznego, zarządzanie współużytkowanymi zasobami fizycznymi, wirtualizacja lub dzielenie SDN Datapath.
### SDN Control to Data-Plane Interface (CDPI)
SDN CDPI jest interfejsem zdefiniowanym pomiędzy kontrolerem SDN, a SDN Datapath, który zapewnia co najmniej  programową kontrolę wszystkich operacji przesyłania, reklamę możliwości, raportowanie statystyk oraz powiadomienie o zdarzeniu. Jedną z wartości SDN jest oczekiwanie, że CDPI zostanie wdrożony w otwarty, niezależny od dostawcy i interoperacyjny sposób.
### SDN Northbound Interfaces (NBI)
SDN NBI to interfejsy między aplikacjami SDN i kontrolerami SDN, które zazwyczaj zapewniają abstrakcyjne widoki sieciowe i umożliwiają bezpośrednią ekspresję zachowania i wymagań sieci. Może to nastąpić na dowolnym poziomie abstrakcji (szerokości geograficznej) i różnych zestawach funkcjonalności (długość geograficzna). Jedną z wartości SDN jest oczekiwanie, że interfejsy te są wdrażane w sposób otwarty, niezależny od dostawcy i interoperacyjny.
## SDN Control Plane
Scentralizowany - Hierarchiczny - Rozproszony 
Implementacja control plane SDN może przebiegać według scentralizowanego, hierarchicznego lub zdecentralizowanego projektu. Początkowe propozycje control plane SDN skupiały się na scentralizowanym rozwiązaniu, w którym pojedyncza jednostka sterująca ma globalny widok sieci. Chociaż upraszcza to implementację logiki sterowania, ma ograniczenia skalowalności w miarę wzrostu rozmiaru i dynamiki sieci. Aby pokonać te ograniczenia, w literaturze zaproponowano kilka podejść, które dzielą się na dwie kategorie, hierarchiczne i całkowicie rozproszone. W rozwiązaniach hierarchicznych rozproszone kontrolery działają w widoku podzielonego na partycje, podczas gdy decyzje wymagające znajomości całej sieci są podejmowane przez logicznie scentralizowany kontroler główny. W podejściach rozproszonych, kontrolery działają na swoim widoku lokalnym lub mogą wymieniać wiadomości synchronizacyjne w celu zwiększenia swojej wiedzy. Rozproszone rozwiązania są bardziej odpowiednie do wspierania adaptacyjnych aplikacji SDN.
### Controller Placement
Kluczową kwestią przy projektowaniu rozproszonej control plane SDN jest decyzja o liczbie i rozmieszczeniu jednostek sterujących. Ważnym parametrem, który należy rozważyć, jest opóźnienie propagacji między kontrolerami a urządzeniami sieciowymi, zwłaszcza w kontekście dużych sieci. Inne cele, które zostały rozważone, obejmują niezawodność ścieżki sterowania, odporność na uszkodzenia, i wymagania aplikacji. 
## Aplikacje
### SDMN 
Software-defined mobile networking to podejście do projektowania sieci komórkowych, w którym wszystkie funkcje związane z protokołem są wdrażane w oprogramowaniu, maksymalizując wykorzystanie oprogramowania zarówno w sieci szkieletowej, jak i sieć dostępu radiowego. Proponuje się jako rozszerzenie paradygmatu SDN do włączenia funkcji specyficznych dla sieci mobilnej.
### SD-WAN
SD-WAN to sieć rozległa (WAN) zarządzana z wykorzystaniem zasad SDN. Głównym napędem SD-WAN jest obniżenie kosztów WAN przy użyciu tańszych i dostępnych na rynku łączy dzierżawionych, jako alternatywa lub częściowa wymiana droższych linii MPLS. Kontrola i zarządzanie są administrowane oddzielnie od sprzętu z centralnymi kontrolerami, co ułatwia konfigurację i administrację. W przypadku MPLS oddziały korporacyjne często miały długie okresy oczekiwania na dzierżawione linie, aby były gotowe do użycia. 
SD-WAN może być wdrożony wiele razy szybciej, Zero-touch provisioning sprawia, że ​​SD-WAN jest jedną z najprostszych technologii do zainstalowania.
### SD-LAN
SD-LAN to lokalna sieć komputerowa (LAN) zbudowana na zasadach sieci definiowanych programowo, chociaż istnieją kluczowe różnice w topologii, bezpieczeństwie sieci, widoczności i kontroli aplikacji, zarządzaniu i jakości usług. SD-LAN oddziela zarządzanie kontrolą i forwarding plane, aby umożliwić architekturę opartą na zasadach dla przewodowych i bezprzewodowych sieci LAN. Sieci SD-LAN charakteryzują się wykorzystaniem systemu zarządzania chmurą i łącznością bezprzewodową bez obecności kontrolera fizycznego. 
## Bezpieczeństwo przy użyciu paradygmatu SDN
Architektura SDN może ułatwiać lub usprawniać aplikacje bezpieczeństwa związane z siecią, ze względu na centralny widok kontrolera sieci i jej zdolność do przeprogramowania data plane w dowolnym momencie. Podczas gdy bezpieczeństwo samej architektury SDN pozostaje kwestią otwartą, która już była badana kilka razy w środowisku badawczym, poniższe akapity koncentrują się wyłącznie na możliwych do zastosowania aplikacjach bezpieczeństwa.

Kilka prac badawczych dotyczących SDN już badało aplikacje bezpieczeństwa zbudowane na kontrolerze SDN, mając na uwadze różne cele. Rozproszone wykrywanie i ograniczanie Denial of Service (DDoS), a także botnet i propagacje robaków, to niektóre konkretne przypadki użycia takich aplikacji: w zasadzie chodzi o okresowe zbieranie statystyk z forwarding plane w znormalizowany sposób (np. przy użyciu Openflow), a następnie zastosowanie algorytmów klasyfikacji do tych statystyk w celu wykrycia wszelkich anomalii sieci. W przypadku wykrycia anomalii aplikacja informuje kontrolera, jak przeprogramować data plane w celu jej ograniczenia.
Inny rodzaj aplikacji bezpieczeństwa wykorzystuje kontroler SDN, poprzez implementację algorytmów ruchomej obrony celu (MTD - moving target defense). Algorytmy MTD są zwykle używane w celu utrudnienia ataku na dany system lub sieć poprzez okresowe ukrywanie lub zmienianie kluczowych właściwości tego systemu lub sieci. W tradycyjnych sieciach wdrażanie algorytmów MTD nie jest zadaniem trywialnym, ponieważ trudno jest zbudować centralny organ zdolny do określenia - dla każdej części systemu, która ma być chroniona - które kluczowe właściwości są ukryte lub zmienione. W sieci SDN takie zadania stają się prostsze dzięki centralności kontrolera. Jedna aplikacja może na przykład okresowo przypisywać wirtualne adresy IP do hostów w sieci, a odwzorowanie wirtualnego IP / rzeczywistego adresu IP jest następnie wykonywane przez kontroler. Inna aplikacja może symulować niektóre fałszywe otwarte / zamknięte / przefiltrowane porty na losowych hostach w sieci, aby dodać znaczny hałas podczas fazy rozpoznania (np. Skanowanie) przeprowadzonej przez atakującego.

Dodatkową wartość dotyczącą bezpieczeństwa w sieciach z włączoną obsługą SDN można również uzyskać za pomocą odpowiednio FlowVisor i FlowChecker. Pierwsza z nich próbuje użyć jednej forwarding plane sprzętowego do współużytkowania wielu oddzielnych sieci logicznych. Zgodnie z tym podejściem te same zasoby sprzętowe mogą być wykorzystywane do celów produkcyjnych i rozwojowych, a także do oddzielania monitorowania, konfiguracji i ruchu internetowego, gdzie każdy scenariusz może mieć swoją własną logiczną topologię zwaną wycinkiem. W połączeniu z tym podejściem FlowChecker realizuje sprawdzanie poprawności nowych reguł OpenFlow, które są wdrażane przez użytkowników używających własnego wycinka.

Aplikacje kontrolerów SDN są najczęściej wdrażane w scenariuszach na dużą skalę, co wymaga kompleksowej kontroli ewentualnych błędów programowania. System służący do tego to NICE, został opisany w 2012 roku. Wprowadzenie nadrzędnej architektury bezpieczeństwa wymaga kompleksowego i długotrwałego podejścia do SDN. Od momentu wprowadzenia projektanci szukają możliwych sposobów zabezpieczenia SDN, które nie wpływają na skalowalność.
## Grupowe przesyłanie danych za pomocą SDN
Rozproszone aplikacje działające w centrach danych zwykle replikują dane w celu synchronizacji, odporności na awarie, równoważenia obciążenia i zbliżenia danych do użytkowników (co zmniejsza opóźnienia dla użytkowników i zwiększa ich postrzeganą przepustowość). Ponadto wiele aplikacji, takich jak Hadoop, replikuje dane w centrum danych na wielu stelażach, aby zwiększyć odporność na awarie i ułatwić odzyskiwanie danych. Wszystkie te operacje wymagają dostarczenia danych z jednego komputera lub centrum danych do wielu komputerów lub centrów danych. Proces niezawodnego dostarczania danych z jednego komputera na wiele komputerów określany jest jako niezawodna dostawa danych grupowych RGDD (Reliable Group Data Delivery).

Przełączniki SDN mogą być używane dla RGDD poprzez instalację reguł, które umożliwiają przekazywanie do wielu portów wychodzących. Na przykład OpenFlow zapewnia wsparcie dla tabel grupowych od wersji 1.1, co czyni to możliwym. Używając SDN, centralny kontroler może ostrożnie i inteligentnie skonfigurować drzewo sieci dla RGDD. Takie drzewo można budować, zwracając uwagę na stan przeciążenia sieci / obciążenia, aby poprawić wydajność. Na przykład MCTCP (Multipath Transport Shim Layer)  to schemat dostarczania ścieżek i zasobów do wielu węzłów w centrach danych, który opiera się na regularnych i uporządkowanych topologiach.
## Żródła
* https://www.opennetworking.org/sdn-definition/
* https://pl.wikipedia.org/wiki/Programowalna_sie%C4%87_komputerowa
* Prezentacje dotyczące SDN z konferencji PLNOG 10 i 12. https://www.youtube.com/watch?v=I_NLy2BWmfE&t=1780s
* Prezentacje dotyczące wdrożenia Fortinet w sieci SDN.
* https://itwiz.pl/sdn-oprogramowanie-na-pierwszym-planie/
